<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport"
         content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
      <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase.js"></script>
      <link rel="stylesheet" type="text/css" href="style.css">
      <title>Main</title>
   </head>
   <script>
      // Initialize Firebase
          var firebaseConfig = {
                     apiKey: "AIzaSyCubCFe1U0nuENUD-u8Ldxpt9r9xh_gUzc",
                     authDomain: "xavier-557c6.firebaseapp.com",
                     projectId: "xavier-557c6",
                     storageBucket: "xavier-557c6.appspot.com",
                     messagingSenderId: "879419829168",
                     appId: "1:879419829168:web:cf7e0b3377c2965e104475",
                     databaseURL:"https://xavier-557c6-default-rtdb.firebaseio.com/",
                     measurementId: "G-5VXZKLNMYQ"
                 };
          firebase.initializeApp(firebaseConfig);
         
   </script>
   <body>
      <div class="mainblock" style="margin-top: 3%;">
         <h1>Patient List</h1>
      </div>
      <div id = 'field' style="margin-top: 3%;"></div>
      <div onclick="to_main()" class = "mainblock" style="margin-top: 3%;">돌아가기</div>
      <script type="text/javascript">
         function remove(val){
             // console.log(val)
             // var val = decodeURI(val);
             firebase.database().ref(val+'/').remove();
             location.href = "main.html";
         }
         
         function to_main(name){
             
             location.href = "main.html"
         }
                     
         let dbTestRef = firebase.database().ref('/')
         
         dbTestRef.on('child_added', function(snapshot){
             var data = snapshot.val();
             var a = encodeURI(data.name);
             var b = data.name;
             console.log(a)
             var div1 = document.createElement('div');
             var div2 = document.createElement('div');
             div1.className = 'subblock';
             div2.className = 'buttonblock';
             div1.innerHTML = data.name;
             div2.innerHTML = `<div onclick="remove('${data.name}')" style="margin-top: 3%;">삭제</div>`;
             
            
             document.getElementById('field').appendChild(div1);
             document.getElementById('field').appendChild(div2);
         })
      </script>
   </body>
</html>